{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Ecommerce website\\\\ecommerce-frontend\\\\src\\\\context\\\\OrderContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { orderAPI } from '../utils/api';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderContext = /*#__PURE__*/createContext();\nexport const OrderProvider = ({\n  children\n}) => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    user\n  } = useAuth();\n  const fetchUserOrders = async () => {\n    if (!user) return;\n    setLoading(true);\n    try {\n      const response = await orderAPI.getByUser(user.id);\n      setOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (user) {\n      fetchUserOrders();\n    }\n  }, [user]);\n  const createOrder = async orderData => {\n    try {\n      const response = await orderAPI.create({\n        ...orderData,\n        userId: user === null || user === void 0 ? void 0 : user.id,\n        status: 'pending',\n        trackingSteps: [{\n          status: 'Order Placed',\n          completed: true,\n          date: new Date().toISOString()\n        }, {\n          status: 'Processing',\n          completed: false,\n          date: null\n        }, {\n          status: 'Shipped',\n          completed: false,\n          date: null\n        }, {\n          status: 'Out for Delivery',\n          completed: false,\n          date: null\n        }, {\n          status: 'Delivered',\n          completed: false,\n          date: null\n        }]\n      });\n      const newOrder = response.data;\n      setOrders(prev => [newOrder, ...prev]);\n      return {\n        success: true,\n        order: newOrder\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  };\n  const updateOrderStatus = async (orderId, newStatus, stepIndex) => {\n    try {\n      const response = await orderAPI.updateStatus(orderId, {\n        status: newStatus,\n        stepIndex\n      });\n      setOrders(prev => prev.map(order => order._id === orderId ? response.data : order));\n      return {\n        success: true\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  };\n  const getOrderById = async orderId => {\n    try {\n      const response = await orderAPI.getById(orderId);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching order:', error);\n      return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(OrderContext.Provider, {\n    value: {\n      orders,\n      loading,\n      createOrder,\n      updateOrderStatus,\n      getOrderById,\n      fetchUserOrders\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderProvider, \"myyUS2WpJouGiJSDcSc7wSYHe6Y=\", false, function () {\n  return [useAuth];\n});\n_c = OrderProvider;\nexport const useOrders = () => {\n  _s2();\n  const context = useContext(OrderContext);\n  if (!context) {\n    throw new Error('useOrders must be used within OrderProvider');\n  }\n  return context;\n};\n_s2(useOrders, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"OrderProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","orderAPI","useAuth","jsxDEV","_jsxDEV","OrderContext","OrderProvider","children","_s","orders","setOrders","loading","setLoading","user","fetchUserOrders","response","getByUser","id","data","error","console","createOrder","orderData","create","userId","status","trackingSteps","completed","date","Date","toISOString","newOrder","prev","success","order","message","updateOrderStatus","orderId","newStatus","stepIndex","updateStatus","map","_id","getOrderById","getById","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useOrders","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/Lenovo/Downloads/Ecommerce website/ecommerce-frontend/src/context/OrderContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { orderAPI } from '../utils/api';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst OrderContext = createContext();\r\n\r\nexport const OrderProvider = ({ children }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const fetchUserOrders = async () => {\r\n    if (!user) return;\r\n    setLoading(true);\r\n    try {\r\n      const response = await orderAPI.getByUser(user.id);\r\n      setOrders(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUserOrders();\r\n    }\r\n  }, [user]);\r\n\r\n  const createOrder = async (orderData) => {\r\n    try {\r\n      const response = await orderAPI.create({\r\n        ...orderData,\r\n        userId: user?.id,\r\n        status: 'pending',\r\n        trackingSteps: [\r\n          { status: 'Order Placed', completed: true, date: new Date().toISOString() },\r\n          { status: 'Processing', completed: false, date: null },\r\n          { status: 'Shipped', completed: false, date: null },\r\n          { status: 'Out for Delivery', completed: false, date: null },\r\n          { status: 'Delivered', completed: false, date: null }\r\n        ]\r\n      });\r\n      \r\n      const newOrder = response.data;\r\n      setOrders(prev => [newOrder, ...prev]);\r\n      return { success: true, order: newOrder };\r\n    } catch (error) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const updateOrderStatus = async (orderId, newStatus, stepIndex) => {\r\n    try {\r\n      const response = await orderAPI.updateStatus(orderId, { status: newStatus, stepIndex });\r\n      setOrders(prev => prev.map(order =>\r\n        order._id === orderId ? response.data : order\r\n      ));\r\n      return { success: true };\r\n    } catch (error) {\r\n      return { success: false, error: error.message };\r\n    }\r\n  };\r\n\r\n  const getOrderById = async (orderId) => {\r\n    try {\r\n      const response = await orderAPI.getById(orderId);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching order:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <OrderContext.Provider value={{\r\n      orders,\r\n      loading,\r\n      createOrder,\r\n      updateOrderStatus,\r\n      getOrderById,\r\n      fetchUserOrders\r\n    }}>\r\n      {children}\r\n    </OrderContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useOrders = () => {\r\n  const context = useContext(OrderContext);\r\n  if (!context) {\r\n    throw new Error('useOrders must be used within OrderProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,YAAY,gBAAGR,aAAa,CAAC,CAAC;AAEpC,OAAO,MAAMS,aAAa,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM;IAAEc;EAAK,CAAC,GAAGX,OAAO,CAAC,CAAC;EAE1B,MAAMY,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI,CAACD,IAAI,EAAE;IACXD,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMG,QAAQ,GAAG,MAAMd,QAAQ,CAACe,SAAS,CAACH,IAAI,CAACI,EAAE,CAAC;MAClDP,SAAS,CAACK,QAAQ,CAACG,IAAI,CAAC;IAC1B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD,CAAC,SAAS;MACRP,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACd,IAAIa,IAAI,EAAE;MACRC,eAAe,CAAC,CAAC;IACnB;EACF,CAAC,EAAE,CAACD,IAAI,CAAC,CAAC;EAEV,MAAMQ,WAAW,GAAG,MAAOC,SAAS,IAAK;IACvC,IAAI;MACF,MAAMP,QAAQ,GAAG,MAAMd,QAAQ,CAACsB,MAAM,CAAC;QACrC,GAAGD,SAAS;QACZE,MAAM,EAAEX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,EAAE;QAChBQ,MAAM,EAAE,SAAS;QACjBC,aAAa,EAAE,CACb;UAAED,MAAM,EAAE,cAAc;UAAEE,SAAS,EAAE,IAAI;UAAEC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QAAE,CAAC,EAC3E;UAAEL,MAAM,EAAE,YAAY;UAAEE,SAAS,EAAE,KAAK;UAAEC,IAAI,EAAE;QAAK,CAAC,EACtD;UAAEH,MAAM,EAAE,SAAS;UAAEE,SAAS,EAAE,KAAK;UAAEC,IAAI,EAAE;QAAK,CAAC,EACnD;UAAEH,MAAM,EAAE,kBAAkB;UAAEE,SAAS,EAAE,KAAK;UAAEC,IAAI,EAAE;QAAK,CAAC,EAC5D;UAAEH,MAAM,EAAE,WAAW;UAAEE,SAAS,EAAE,KAAK;UAAEC,IAAI,EAAE;QAAK,CAAC;MAEzD,CAAC,CAAC;MAEF,MAAMG,QAAQ,GAAGhB,QAAQ,CAACG,IAAI;MAC9BR,SAAS,CAACsB,IAAI,IAAI,CAACD,QAAQ,EAAE,GAAGC,IAAI,CAAC,CAAC;MACtC,OAAO;QAAEC,OAAO,EAAE,IAAI;QAAEC,KAAK,EAAEH;MAAS,CAAC;IAC3C,CAAC,CAAC,OAAOZ,KAAK,EAAE;MACd,OAAO;QAAEc,OAAO,EAAE,KAAK;QAAEd,KAAK,EAAEA,KAAK,CAACgB;MAAQ,CAAC;IACjD;EACF,CAAC;EAED,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,OAAO,EAAEC,SAAS,EAAEC,SAAS,KAAK;IACjE,IAAI;MACF,MAAMxB,QAAQ,GAAG,MAAMd,QAAQ,CAACuC,YAAY,CAACH,OAAO,EAAE;QAAEZ,MAAM,EAAEa,SAAS;QAAEC;MAAU,CAAC,CAAC;MACvF7B,SAAS,CAACsB,IAAI,IAAIA,IAAI,CAACS,GAAG,CAACP,KAAK,IAC9BA,KAAK,CAACQ,GAAG,KAAKL,OAAO,GAAGtB,QAAQ,CAACG,IAAI,GAAGgB,KAC1C,CAAC,CAAC;MACF,OAAO;QAAED,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOd,KAAK,EAAE;MACd,OAAO;QAAEc,OAAO,EAAE,KAAK;QAAEd,KAAK,EAAEA,KAAK,CAACgB;MAAQ,CAAC;IACjD;EACF,CAAC;EAED,MAAMQ,YAAY,GAAG,MAAON,OAAO,IAAK;IACtC,IAAI;MACF,MAAMtB,QAAQ,GAAG,MAAMd,QAAQ,CAAC2C,OAAO,CAACP,OAAO,CAAC;MAChD,OAAOtB,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C,OAAO,IAAI;IACb;EACF,CAAC;EAED,oBACEf,OAAA,CAACC,YAAY,CAACwC,QAAQ;IAACC,KAAK,EAAE;MAC5BrC,MAAM;MACNE,OAAO;MACPU,WAAW;MACXe,iBAAiB;MACjBO,YAAY;MACZ7B;IACF,CAAE;IAAAP,QAAA,EACCA;EAAQ;IAAAwC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAE5B,CAAC;AAAC1C,EAAA,CAjFWF,aAAa;EAAA,QAGPJ,OAAO;AAAA;AAAAiD,EAAA,GAHb7C,aAAa;AAmF1B,OAAO,MAAM8C,SAAS,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC7B,MAAMC,OAAO,GAAGxD,UAAU,CAACO,YAAY,CAAC;EACxC,IAAI,CAACiD,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;EAChE;EACA,OAAOD,OAAO;AAChB,CAAC;AAACD,GAAA,CANWD,SAAS;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}